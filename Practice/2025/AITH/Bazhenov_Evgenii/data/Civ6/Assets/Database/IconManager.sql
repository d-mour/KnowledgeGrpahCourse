
PRAGMA user_version = 1;
 
CREATE TABLE 'IconAtlases'(
	'Name' TEXT NOT NULL,
	PRIMARY KEY('Name')
);

CREATE TABLE 'IconTextureAtlases'(
	'Name' TEXT NOT NULL, 
	'IconSize' INTEGER NOT NULL, 
	'IconsPerRow' INTEGER NOT NULL DEFAULT 1,
	'IconsPerColumn' INTEGER NOT NULL DEFAULT 1, 
	'FileName' TEXT NOT NULL, 
	'OffsetH' INTEGER NOT NULL DEFAULT 0, 
	'OffsetV' INTEGER NOT NULL DEFAULT 0, 
	'Baseline' INTEGER NOT NULL DEFAULT 0,
	PRIMARY KEY ('Name', 'IconSize'),
	FOREIGN KEY('Name') REFERENCES IconAtlases('Name') ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TRIGGER 'IconTextureAtlases_Insert' BEFORE INSERT ON IconTextureAtlases
BEGIN
	INSERT OR IGNORE INTO IconAtlases VALUES (NEW.'Name');
END;

CREATE TABLE 'Icons' (
	'Name' TEXT NOT NULL,
	PRIMARY KEY('Name')
);

CREATE TABLE 'IconDefinitions'(
	'Name' TEXT NOT NULL,
	'Atlas' TEXT NOT NULL,
	'Index' INTEGER NOT NULL DEFAULT 0,
	PRIMARY KEY('Name', 'Atlas'),
	FOREIGN KEY('Name') REFERENCES Icons('Name') ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY('Atlas') REFERENCES IconAtlases('Name') ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TRIGGER 'IconDefinitions_Insert' BEFORE INSERT ON IconDefinitions
BEGIN
	INSERT OR IGNORE INTO Icons VALUES (NEW.'Name');
END;


CREATE TABLE 'IconAliases'(
	'Name' TEXT NOT NULL,
	'OtherName' TEXT NOT NULL,
	PRIMARY KEY('Name'),
	FOREIGN KEY('Name') REFERENCES Icons('Name') ON DELETE CASCADE ON UPDATE CASCADE
	FOREIGN KEY('OtherName') REFERENCES Icons('Name') ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TRIGGER 'IconAliases_Insert' BEFORE INSERT ON IconAliases
BEGIN
	INSERT OR IGNORE INTO Icons VALUES (NEW.'Name');
END;
