# SPARQL запросы для Protege
# Загрузите онтологию cars_ontology.owl в Protege и выполните эти запросы через SPARQL Query tab

PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <http://www.semanticweb.org/fqy/ontologies/2025/9/untitled-ontology-7#>

# ============================================================================
# Запрос 1: Автомобиль для перевозки детей, с высоким рейтингом безопасности и большим багажником
# ============================================================================
SELECT DISTINCT ?vehicle ?rating ?trunk ?manufacturer ?year ?price
WHERE {
    ?vehicle rdf:type :Vehicle .
    OPTIONAL { ?vehicle :OverallCrashRating ?rating . }
    OPTIONAL { ?vehicle :TrunkVolume ?trunk . }
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    OPTIONAL { ?vehicle :MSRP ?price . }
    FILTER (
        (!bound(?rating) || ?rating >= 4) &&
        (!bound(?trunk) || ?trunk >= 15.0)
    )
}
ORDER BY DESC(?rating) DESC(?trunk)
LIMIT 20

# ============================================================================
# Запрос 2: Экономичный автомобиль для ежедневных поездок на работу в пробках
# ============================================================================
SELECT DISTINCT ?vehicle ?cityMpg ?highwayMpg ?manufacturer ?year ?price
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :CityMPG ?cityMpg .
    OPTIONAL { ?vehicle :HighwayMPG ?highwayMpg . }
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    OPTIONAL { ?vehicle :MSRP ?price . }
    FILTER (?cityMpg >= 25.0)
}
ORDER BY DESC(?cityMpg)
LIMIT 20

# ============================================================================
# Запрос 3: Спортивные автомобили с ограниченным бюджетом (высокая мощность, низкая цена)
# ============================================================================
SELECT DISTINCT ?vehicle ?hp ?price ?segment ?manufacturer ?year
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :EngineHP ?hp .
    ?vehicle :MSRP ?price .
    ?vehicle :hasSegment ?segment .
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    FILTER (
        ?hp >= 200 &&
        ?price <= 50000 &&
        (regex(str(?segment), "High-Performance", "i") || 
         regex(str(?segment), "Performance", "i") ||
         regex(str(?segment), "Sport", "i"))
    )
}
ORDER BY DESC(?hp) ASC(?price)
LIMIT 20

# ============================================================================
# Запрос 4: Автомобиль для поездок по городу, чтобы выглядеть презентабельно
# ============================================================================
SELECT DISTINCT ?vehicle ?cityMpg ?segment ?manufacturer ?year ?price
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :hasSegment ?segment .
    ?vehicle :CityMPG ?cityMpg .
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    OPTIONAL { ?vehicle :MSRP ?price . }
    FILTER (
        regex(str(?segment), "Luxury", "i") &&
        ?cityMpg >= 18.0
    )
}
ORDER BY DESC(?cityMpg)
LIMIT 20

# ============================================================================
# Запрос 5: Надежный автомобиль премиум-класса для спокойной езды
# ============================================================================
SELECT DISTINCT ?vehicle ?rating ?segment ?manufacturer ?year ?price
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :hasSegment ?segment .
    OPTIONAL { ?vehicle :OverallCrashRating ?rating . }
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    OPTIONAL { ?vehicle :MSRP ?price . }
    FILTER (
        regex(str(?segment), "Luxury", "i") &&
        (!bound(?rating) || ?rating >= 4)
    )
}
ORDER BY DESC(?rating)
LIMIT 20

# ============================================================================
# Запрос 6: Экономичный автомобиль для мегаполиса с пробками
# ============================================================================
SELECT DISTINCT ?vehicle ?cityMpg ?highwayMpg ?manufacturer ?year ?price
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :CityMPG ?cityMpg .
    OPTIONAL { ?vehicle :HighwayMPG ?highwayMpg . }
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    OPTIONAL { ?vehicle :MSRP ?price . }
    FILTER (?cityMpg >= 28.0)
}
ORDER BY DESC(?cityMpg)
LIMIT 20

# ============================================================================
# Запрос 7: Автомобиль с полным приводом для грунтовых дорог / Внедорожник или кроссовер
# ============================================================================
SELECT DISTINCT ?vehicle ?driveType ?bodyStyle ?manufacturer ?year ?price
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :DriveType ?driveType .
    OPTIONAL { ?vehicle :StyledAs ?bodyStyle . }
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    OPTIONAL { ?vehicle :MSRP ?price . }
    FILTER (
        (regex(str(?driveType), "all wheel drive", "i") || 
         regex(str(?driveType), "4wd", "i") ||
         regex(str(?driveType), "awd", "i")) &&
        (!bound(?bodyStyle) || 
         regex(str(?bodyStyle), "SUV", "i") ||
         regex(str(?bodyStyle), "Crossover", "i") ||
         regex(str(?bodyStyle), "Wagon", "i"))
    )
}
LIMIT 20

# ============================================================================
# Запрос 8: Бюджет до 20000, надежный автомобиль с низким расходом топлива
# ============================================================================
SELECT DISTINCT ?vehicle ?price ?cityMpg ?highwayMpg ?rating ?manufacturer ?year
WHERE {
    ?vehicle rdf:type :Vehicle .
    ?vehicle :MSRP ?price .
    ?vehicle :CityMPG ?cityMpg .
    ?vehicle :HighwayMPG ?highwayMpg .
    OPTIONAL { ?vehicle :OverallCrashRating ?rating . }
    OPTIONAL { ?vehicle :MadeBy ?manufacturer . }
    OPTIONAL { ?vehicle :Year ?year . }
    FILTER (
        ?price <= 20000 &&
        ?cityMpg >= 25.0 &&
        ?highwayMpg >= 30.0
    )
}
ORDER BY DESC(?cityMpg) DESC(?highwayMpg) DESC(?rating)
LIMIT 20

