# Запрос 1: Автомобиль для перевозки детей, с высоким рейтингом безопасности и большим багажником
query1 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    OPTIONAL {{ ?vehicle :OverallCrashRating ?rating . }}
    OPTIONAL {{ ?vehicle :TrunkVolume ?trunk . }}
    FILTER (
        (!bound(?rating) || ?rating >= 4) &&
        (!bound(?trunk) || ?trunk >= 15.0)
    )
}}
ORDER BY DESC(?rating) DESC(?trunk)
LIMIT 20
"""

# Запрос 2: Экономичный автомобиль для ежедневных поездок на работу в пробках (высокий CityMPG)
query2 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :CityMPG ?cityMpg .
    FILTER (?cityMpg >= 25.0)
}}
ORDER BY DESC(?cityMpg)
LIMIT 20
"""

# Запрос 3: Спортивные автомобили с ограниченным бюджетом (высокая мощность, низкая цена)
query3 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :EngineHP ?hp .
    ?vehicle :MSRP ?price .
    ?vehicle :hasSegment ?segment .
    FILTER (
        ?hp >= 200 &&
        ?price <= 50000 &&
        (regex(str(?segment), "High-Performance", "i") || 
         regex(str(?segment), "Performance", "i") ||
         regex(str(?segment), "Sport", "i"))
    )
}}
ORDER BY DESC(?hp) ASC(?price)
LIMIT 20
"""

# Запрос 4: Автомобиль для поездок по городу, чтобы выглядеть презентабельно (премиум сегмент)
query4 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :hasSegment ?segment .
    ?vehicle :CityMPG ?cityMpg .
    FILTER (
        regex(str(?segment), "Luxury", "i") &&
        ?cityMpg >= 18.0
    )
}}
ORDER BY DESC(?cityMpg)
LIMIT 20
"""

# Запрос 5: Надежный автомобиль премиум-класса для спокойной езды
query5 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :hasSegment ?segment .
    OPTIONAL {{ ?vehicle :OverallCrashRating ?rating . }}
    FILTER (
        regex(str(?segment), "Luxury", "i") &&
        (!bound(?rating) || ?rating >= 4)
    )
}}
ORDER BY DESC(?rating)
LIMIT 20
"""

# Запрос 6: Экономичный автомобиль для мегаполиса с пробками
query6 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :CityMPG ?cityMpg .
    FILTER (?cityMpg >= 28.0)
}}
ORDER BY DESC(?cityMpg)
LIMIT 20
"""

# Запрос 7: Автомобиль с полным приводом для грунтовых дорог / Внедорожник или кроссовер
query7 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :DriveType ?driveType .
    OPTIONAL {{ ?vehicle :StyledAs ?bodyStyle . }}
    FILTER (
        (regex(str(?driveType), "all wheel drive", "i") || 
         regex(str(?driveType), "4wd", "i") ||
         regex(str(?driveType), "awd", "i")) &&
        (!bound(?bodyStyle) || 
         regex(str(?bodyStyle), "SUV", "i") ||
         regex(str(?bodyStyle), "Crossover", "i") ||
         regex(str(?bodyStyle), "Wagon", "i"))
    )
}}
LIMIT 20
"""

# Запрос 8: Бюджет до 20000, надежный автомобиль с низким расходом топлива
query8 = f"""
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <{BASE_NS}>

SELECT DISTINCT ?vehicle
WHERE {{
    ?vehicle rdf:type :Vehicle .
    ?vehicle :MSRP ?price .
    ?vehicle :CityMPG ?cityMpg .
    ?vehicle :HighwayMPG ?highwayMpg .
    OPTIONAL {{ ?vehicle :OverallCrashRating ?rating . }}
    FILTER (
        ?price <= 20000 &&
        ?cityMpg >= 25.0 &&
        ?highwayMpg >= 30.0
    )
}}
ORDER BY DESC(?cityMpg) DESC(?highwayMpg) DESC(?rating)
LIMIT 20
"""


def main():
    """Выполняет все SPARQL запросы"""
    
    print("="*80)
    print("SPARQL ЗАПРОСЫ ДЛЯ ПОИСКА АВТОМОБИЛЕЙ")
    print("="*80)
    
    # Выполняем все запросы
    execute_sparql(query1, 
                   "Мне нужен автомобиль для перевозки детей, с высоким рейтингом безопасности и большим багажником")
    
    execute_sparql(query2,
                   "Ищу экономичный автомобиль для ежедневных поездок на работу в пробках")
    
    execute_sparql(query3,
                   "Люблю скорость, но бюджет ограничен - какие спортивные автомобили доступны?")
    
    execute_sparql(query4,
                   "Нужен автомобиль для поездок по городу, чтобы выглядеть презентабельно на встречах")
    
    execute_sparql(query5,
                   "Ищу надежный автомобиль премиум-класса для спокойной езды")
    
    execute_sparql(query6,
                   "Живу в мегаполисе с постоянными пробками, нужен экономичный автомобиль")
    
    execute_sparql(query7,
                   "Часто езжу по грунтовым дорогам, нужен автомобиль с полным приводом / Живу в селе, дороги плохие, нужен внедорожник или кроссовер")
    
    execute_sparql(query8,
                   "Бюджет до 20000, нужен надежный автомобиль с низким расходом топлива")
    
    print("\n" + "="*80)
    print("Все запросы выполнены!")
    print("="*80)


if __name__ == "__main__":
    main()

